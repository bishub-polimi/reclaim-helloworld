(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{85765:(e,s,t)=>{Promise.resolve().then(t.bind(t,7284))},7284:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>P});var n=t(95155),a=t(4719),r=t(35965),l=t(12115);function i(e){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"w-screen h-screen absolute translate-y-[-50%] translate-x-[-50%] top-[50%] left-[50%] z-0 bg-opacity-20 bg-black flex justify-center items-center",onClick:()=>e.setIsOpen(!1),children:(0,n.jsx)("div",{className:"w-[80%] h-[50%] bg-background overflow-auto p-5 rounded-lg",children:e.proof?JSON.stringify(e.proof):""})})})}var c=t(21169),o=t(66006);function d(e){let s=async()=>{let s=e.providerID,t=await o.ReclaimProofRequest.init("0x8A88F2b97a97CF1Acd3Cc20d2CbBFF730ECE16d3","0x54aab461dda5579b5bf9f5ffd9cdf3585354b53531726dac649892a033d3d278",s),n=await t.getRequestUrl();console.log("Request URL:",n),e.setRequestUrl(n),await t.startSession({onSuccess:s=>{s&&("string"==typeof s?(console.log("SDK Message:",s),e.setProof(s)):"string"!=typeof s&&(console.log("Proof generation success",null==s?void 0:s.claimData.context),e.setProof(s)))},onError:e=>{console.error("Verification failed",e)}})};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full",onClick:s,children:"Get Proof"})})}var x=t(6020);function u(e){return(0,n.jsx)(n.Fragment,{children:e.requestUrl?(0,n.jsx)("div",{style:{margin:"20px 0"},children:(0,n.jsx)(x.Ay,{value:e.requestUrl,size:200})}):(0,n.jsx)("div",{className:"flex items-center justify-center w-[200px] h-[200px] bg-stone rounded-lg",children:(0,n.jsx)("h2",{children:"QR not generated yet"})})})}var f=t(72095),m=t(71327),h=t(50860),b=t(93668),g=t(52604),j=t(27193),p=t(51680);let N=e=>{let{notifications:s,onClose:t}=e;if(!s.length)return null;let a=e=>{window.open("https://base-sepolia.blockscout.com/op/".concat(e),"_blank")},r=e=>{if(!e.txHash)return e.message;let s=e.message.split(e.txHash);return(0,n.jsxs)(n.Fragment,{children:[s[0],(0,n.jsxs)("button",{onClick:()=>a(e.txHash),className:"inline-flex items-center gap-1 underline hover:text-blue-600",children:["".concat(e.txHash.slice(0,6),"...").concat(e.txHash.slice(-4)),(0,n.jsx)(g.A,{className:"h-3 w-3"})]}),s[1]]})};return(0,n.jsx)("div",{className:"fixed top-20 right-4 left-4 md:left-auto md:w-96 z-50 space-y-4",children:s.map(e=>(0,n.jsx)("div",{className:"transition-all duration-300 ".concat(e.isVisible?"opacity-100 transform translate-y-0":"opacity-0 transform -translate-y-2"),children:(0,n.jsx)("div",{className:"\n              rounded-lg border p-4 shadow-lg\n              ".concat("success"===e.type?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800","\n            "),role:"alert",children:(0,n.jsxs)("div",{className:"flex items-start gap-2",children:["success"===e.type?(0,n.jsx)(j.A,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}):(0,n.jsx)(p.A,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,n.jsx)("p",{className:"text-sm font-medium break-all",children:r(e)})]})})},e.id))})},v=()=>Math.random().toString(36).substr(2,9),y=e=>e.slice(0,66);function w(e){let s=(0,r.F)(),{notifications:t,addNotification:a,removeNotification:i}=function(){let[e,s]=(0,l.useState)([]),t=e=>{s(s=>s.filter(s=>s.id!==e))};return{notifications:e,addNotification:(e,n,a)=>{let r=v();s(s=>[...s,{id:r,message:e,type:n,isVisible:!0,txHash:a}]),setTimeout(()=>{t(r)},6e3)},removeNotification:t,extractMainHash:y}}(),c="0xEDdED412E852Ba5D54b133C6dbcae8C11a3C47a1",{data:d,writeContractAsync:x,isPending:u,isSuccess:g}=(0,f.x)(),{isSuccess:j,data:p}=(0,m.g)({hash:d,enabled:!!d});(0,l.useEffect)(()=>{g&&d&&(console.log("Transaction sent:",d),a("Transazione inviata! In attesa di conferma...","success",d))},[g,d]),(0,l.useEffect)(()=>{j&&p&&(console.log("Transaction confirmed:",p),setTimeout(()=>{a("Token mintato con successo! TX: ","success",p.transactionHash)},1500))},[j,p]);let{writeContracts:w,isPending:C}=(0,h.o)({mutation:{onSuccess:e=>{a("User Operation inviata! In attesa di conferma...","success"),setTimeout(()=>{a("Token mintato con successo! User Operation: ","success",y(e))},1500)}}}),k=async()=>{let t=[s.address,"0x0000000000000000000000000000000000000000000000000000000000000000",(0,o.transformForOnchain)(e.proof)];try{var n;(null===(n=s.connector)||void 0===n?void 0:n.type)==="coinbaseWallet"?w({contracts:[{address:c,abi:b.HV,functionName:"mint",args:t}],capabilities:{paymasterService:{url:"https://api.developer.coinbase.com/rpc/v1/base-sepolia/GkzqPNE48hUPaCJPOfAVC3YBBqMbk7d1"}}}):await x({address:c,abi:b.HV,functionName:"mint",args:t})}catch(e){console.error("[ClaimToken] Error:",e),a("Errore durante il mint: "+e.message,"error")}};return(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)(N,{notifications:t,onClose:i}),(0,n.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full",onClick:k,disabled:u||C,children:u||C?"Minting...":"Claim"})]})}var C=t(89984);function k(){let[e,s]=(0,l.useState)(),[t,a]=(0,l.useState)(),[o,x]=(0,l.useState)(),[f,m]=(0,l.useState)(""),[h,g]=(0,l.useState)(),[j,p]=(0,l.useState)(!1),N=(0,r.F)(),v="0xEDdED412E852Ba5D54b133C6dbcae8C11a3C47a1",{data:y}=(0,C.Q)({address:v,abi:b.HV,functionName:"balanceOf",args:[N.address,0]}),{data:k}=(0,C.Q)({address:v,abi:b.HV,functionName:"balanceOf",args:[N.address,1]}),{data:F}=(0,C.Q)({address:v,abi:b.HV,functionName:"balanceOf",args:[N.address,2]});return console.log(y),(0,n.jsxs)("div",{className:"h-full flex flex-col items-center justify-center px-10 gap-y-8",children:[(0,n.jsx)(u,{requestUrl:f}),(0,n.jsxs)("div",{className:"flex flex-row items-center justify-center gap-x-12",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-y-4 h-full",children:[(0,n.jsx)("h2",{className:"text-center font-bold",children:"License Points"}),y&&y>BigInt(0)?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"text-center",children:["Claimed ",(0,n.jsx)(c.L7X,{className:"inline text-green"})]})}):e?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{className:"text-blue-500",onClick:()=>(g(e),p(!0)),children:"View Proof"}),(0,n.jsx)(w,{proof:e,id:0})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:["Not generated ",(0,n.jsx)(c.XfH,{className:"inline text-red"})]}),(0,n.jsx)(d,{setProof:s,setRequestUrl:m,providerID:"c444924e-4136-4282-8d2b-6600b45812c3"})]})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-y-4 h-full",children:[(0,n.jsx)("h2",{className:"text-center font-bold",children:"Donation"}),k&&k>BigInt(0)?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"text-center",children:["Claimed ",(0,n.jsx)(c.L7X,{className:"inline text-green"})]})}):t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{className:"text-blue-500",onClick:()=>(g(t),p(!0)),children:"View Proof"}),(0,n.jsx)(w,{proof:t,id:1})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:["Not generated ",(0,n.jsx)(c.XfH,{className:"inline text-red"})]}),(0,n.jsx)(d,{setProof:a,setRequestUrl:m,providerID:"f5d0ef53-97fd-4ec4-9c2f-d9e762eb1fc8"})]})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-y-4 h-full",children:[(0,n.jsx)("h2",{className:"text-center font-bold",children:"Carbon Footprint"}),F&&F>BigInt(0)?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"text-center",children:["Claimed ",(0,n.jsx)(c.L7X,{className:"inline text-green"})]})}):o?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{className:"text-blue-500",onClick:()=>(g(o),p(!0)),children:"View Proof"}),(0,n.jsx)(w,{proof:o,id:2})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:["Not generated ",(0,n.jsx)(c.XfH,{className:"inline text-red"})]}),(0,n.jsx)(d,{setProof:x,setRequestUrl:m,providerID:"52795369-865f-43bc-a49b-bfd10624f90a"})]})]})]}),j&&(0,n.jsx)(i,{setIsOpen:p,proof:h})]})}function F(){let e=(0,r.F)();return(0,n.jsx)(n.Fragment,{children:"connected"==e.status?(0,n.jsx)(k,{}):(0,n.jsx)("div",{className:"flex justify-center items-center h-full w-full",children:"Please connect your wallet"})})}function P(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.A,{backButton:!1,gameButton:!0}),(0,n.jsx)(F,{})]})}},4719:(e,s,t)=>{"use strict";t.d(s,{A:()=>i});var n=t(95155),a=t(64276),r=t(48173),l=t.n(r);function i(e){return(0,n.jsxs)("div",{className:"w-full p-4 flex justify-between",children:[(0,n.jsx)(l(),{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full self-center ".concat(e.backButton?"":"hidden"),href:"/",children:"Back"}),(0,n.jsx)(l(),{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full self-center ".concat(e.gameButton?"":"hidden"),href:"/game",children:"Game"}),(0,n.jsx)(a.pK,{})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[8451,3380,8915,8173,2214,3668,8441,1517,7358],()=>s(85765)),_N_E=e.O()}]);