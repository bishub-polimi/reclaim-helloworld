(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{85765:(e,s,t)=>{Promise.resolve().then(t.bind(t,84332))},84332:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>P});var a=t(95155),r=t(4719),n=t(35965),l=t(12115);function o(e){return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"w-screen h-screen absolute translate-y-[-50%] translate-x-[-50%] top-[50%] left-[50%] z-0 bg-opacity-20 bg-black flex justify-center items-center",onClick:()=>e.setIsOpen(!1),children:(0,a.jsx)("div",{className:"w-[80%] h-[50%] bg-background overflow-auto p-5 rounded-lg",children:e.proof?JSON.stringify(e.proof):""})})})}var i=t(21169),c=t(66006);function d(e){let s=async()=>{let s=e.providerID,t=await c.ReclaimProofRequest.init("0x8A88F2b97a97CF1Acd3Cc20d2CbBFF730ECE16d3","0x54aab461dda5579b5bf9f5ffd9cdf3585354b53531726dac649892a033d3d278",s),a=await t.getRequestUrl();console.log("Request URL:",a),e.setRequestUrl(a),await t.startSession({onSuccess:s=>{s&&("string"==typeof s?(console.log("SDK Message:",s),e.setProof(s)):"string"!=typeof s&&(console.log("Proof generation success",null==s?void 0:s.claimData.context),e.setProof(s)))},onError:e=>{console.error("Verification failed",e)}})};return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full",onClick:s,children:"Richiedi la Prova"})})}var u=t(6020);function x(e){return(0,a.jsx)("div",{className:"flex flex-col items-center w-full max-w-md",children:e.requestUrl?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("a",{href:e.requestUrl,target:"_blank",rel:"noopener noreferrer",className:"mb-4 mx-4 px-4 py-2 border-2 border-gray-400 text-gray-600 hover:border-gray-600  hover:text-gray-800 rounded-lg transition-colors duration-200 text-sm flex items-center justify-between w-auto",children:[(0,a.jsx)("span",{children:"Se sei da mobile, apri il link"}),(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"ml-2",children:[(0,a.jsx)("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),(0,a.jsx)("polyline",{points:"15 3 21 3 21 9"}),(0,a.jsx)("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})]}),(0,a.jsx)("div",{className:"border-2 border-gray-200 rounded-lg p-3",children:(0,a.jsx)(u.Ay,{value:e.requestUrl,size:200})})]}):(0,a.jsx)("div",{className:"flex items-center justify-center w-[200px] h-[200px] bg-gray-100 rounded-lg border-2 border-gray-200",children:(0,a.jsx)("h2",{className:"text-gray-500",children:"QR non ancora generato"})})})}var m=t(72095),f=t(71327),b=t(50860),g=t(93668),h=t(52604),p=t(27193),v=t(51680);let j=()=>Math.random().toString(36).substr(2,9),N=e=>e.slice(0,66);function y(){let[e,s]=(0,l.useState)([]),t=e=>{s(s=>s.filter(s=>s.id!==e))};return{notifications:e,addNotification:(e,a,r)=>{let n=j();s(s=>[...s,{id:n,message:e,type:a,isVisible:!0,txHash:r}]),setTimeout(()=>{t(n)},8e3)},removeNotification:t,extractMainHash:N}}let w=e=>{let{notifications:s,onClose:t}=e;if(!s.length)return null;let r=e=>{let s=e.length>66?"op":"tx",t=e.length>66?N(e):e;window.open("".concat("https://base.blockscout.com","/").concat(s,"/").concat(t),"_blank")},n=e=>{if(!e.txHash)return e.message.slice(0,120);let s=e.message.split(e.txHash);return(0,a.jsxs)(a.Fragment,{children:[s[0],(0,a.jsxs)("button",{onClick:()=>r(e.txHash),className:"inline-flex items-center gap-1 underline hover:text-blue-600",children:["".concat(e.txHash.slice(0,6),"...").concat(e.txHash.slice(-4)),(0,a.jsx)(h.A,{className:"h-3 w-3"})]}),s[1]]})};return(0,a.jsx)("div",{className:"fixed top-20 right-4 left-4 md:left-auto md:w-96 z-50 space-y-4",children:s.map(e=>(0,a.jsx)("div",{className:"transition-all duration-300 ".concat(e.isVisible?"opacity-100 transform translate-y-0":"opacity-0 transform -translate-y-2"),children:(0,a.jsx)("div",{className:"\n              rounded-lg border p-4 shadow-lg\n              ".concat("success"===e.type?"bg-[rgba(160,246,160,0.95)] border-green text-green":"bg-[rgba(243,173,173,0.95)] border-red text-red","\n              }\n            "),role:"alert",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:["success"===e.type?(0,a.jsx)(p.A,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}):(0,a.jsx)(v.A,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,a.jsx)("p",{className:"text-base font-bold break-all",children:n(e)})]})})},e.id))})};function k(e){let s=(0,n.F)(),{notifications:t,addNotification:r,removeNotification:o}=y(),i="0xCd84A4657Aaaa86aa6Ac585162681362ba3b9740",d=e=>{let s=e.message.match(/execution reverted: (.*?)(?:\.|\n|$)/);return(null==s?void 0:s[1])?s[1]:e.message},{data:u,writeContractAsync:x,isPending:h,isSuccess:p,error:v}=(0,m.x)(),{isSuccess:j,data:N,error:k,isError:C}=(0,f.g)({hash:u,enabled:!!u});(0,l.useEffect)(()=>{C&&k&&u&&(console.log("Transaction reverted:",k),r("".concat(d(k)),"error"))},[C,k,u]);let{writeContractsAsync:O,isPending:A}=(0,b.o)({mutation:{onError:e=>{console.error("[ClaimToken] User Operation Error:",e),r("Errore durante l'invio: ".concat(e.message.split("\n")[0]),"error")}}}),E=async()=>{let t=[s.address,"0x0000000000000000000000000000000000000000000000000000000000000000",(0,c.transformForOnchain)(e.proof)];try{var a;if((null===(a=s.connector)||void 0===a?void 0:a.type)==="coinbaseWallet"){r("Invio User Operation in corso...","success");let e=await O({contracts:[{address:i,abi:g.HV,functionName:"mint",args:t}],capabilities:{paymasterService:{url:"https://api.developer.coinbase.com/rpc/v1/base/GkzqPNE48hUPaCJPOfAVC3YBBqMbk7d1"}}});setTimeout(()=>{r("User Operation inviata: ","success",e),console.log("UserOperation result:",e)},1500),setTimeout(()=>{r("In attesa del minting...","success")},1500)}else{let e=await x({address:i,abi:g.HV,functionName:"mint",args:t});setTimeout(()=>{r("Transazione inviata: ","success",e),console.log("Transaction result:",e)},1500),setTimeout(()=>{r("In attesa del minting...","success")},1500)}}catch(e){console.error("[ClaimToken] Error:",e),r("Errore durante il mint: ".concat(e.message.split("\n")[0]),"error")}};return(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)(w,{notifications:t,onClose:o}),(0,a.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full",onClick:E,disabled:h||A,children:h||A?"Minting...":"Ottieni il Token"})]})}var C=t(89984);function O(){let e=(0,n.F)(),{notifications:s,addNotification:t,removeNotification:r}=y(),o="0xCd84A4657Aaaa86aa6Ac585162681362ba3b9740",i=e=>{let s=e.message.match(/execution reverted: (.*?)(?:\.|\n|$)/);return(null==s?void 0:s[1])?s[1]:e.message},{data:c,writeContractAsync:d,isPending:u,isSuccess:x,error:h}=(0,m.x)(),{isSuccess:p,data:v,error:j,isError:N}=(0,f.g)({hash:c,enabled:!!c});(0,l.useEffect)(()=>{N&&j&&c&&(console.log("Transaction reverted:",j),t("".concat(i(j)),"error"))},[N,j,c]);let{writeContractsAsync:k,isPending:C}=(0,b.o)({mutation:{onError:e=>{console.error("[ClaimBadge] User Operation Error:",e),t("Errore durante l'invio: ".concat(e.message.split("\n")[0]),"error")}}}),O=async()=>{let s=[e.address];try{var a;if((null===(a=e.connector)||void 0===a?void 0:a.type)==="coinbaseWallet"){t("Invio User Operation in corso...","success");let e=await k({contracts:[{address:o,abi:g.HV,functionName:"mintBadge",args:s}],capabilities:{paymasterService:{url:"https://api.developer.coinbase.com/rpc/v1/base/GkzqPNE48hUPaCJPOfAVC3YBBqMbk7d1"}}});setTimeout(()=>{t("User Operation inviata: ","success",e),console.log("UserOperation result:",e)},1500),setTimeout(()=>{t("In attesa del minting...","success")},1500)}else{let e=await d({address:o,abi:g.HV,functionName:"mintBadge",args:s});setTimeout(()=>{t("Transazione inviata: ","success",e),console.log("Transaction result:",e)},1500),setTimeout(()=>{t("In attesa del minting...","success")},1500)}}catch(e){console.error("[ClaimBadge] Error:",e),t("Errore durante il mint: ".concat(e.message.split("\n")[0]),"error")}};return(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)(w,{notifications:s,onClose:r}),(0,a.jsx)("button",{className:"bg-newred-500 hover:bg-newred-700 text-white font-bold py-2 px-4 rounded-full",onClick:O,disabled:u||C,children:u||C?"Minting...":"Ottieni il Badge"})]})}function A(){let[e,s]=(0,l.useState)(),[t,r]=(0,l.useState)(),[c,u]=(0,l.useState)(),[m,f]=(0,l.useState)(""),[b,h]=(0,l.useState)(),[p,v]=(0,l.useState)(!1),j=(0,n.F)(),N="0xCd84A4657Aaaa86aa6Ac585162681362ba3b9740",{data:y}=(0,C.Q)({address:N,abi:g.HV,functionName:"balanceOf",args:[j.address,0]}),{data:w}=(0,C.Q)({address:N,abi:g.HV,functionName:"balanceOf",args:[j.address,1]}),{data:A}=(0,C.Q)({address:N,abi:g.HV,functionName:"balanceOf",args:[j.address,2]}),{data:E}=(0,C.Q)({address:N,abi:g.HV,functionName:"balanceOf",args:[j.address,3]}),P=(e,t,n)=>t&&t>BigInt(0)?(0,a.jsxs)("div",{className:"text-center animate-shine-once",children:["Token ottenuto ",(0,a.jsx)(i.L7X,{className:"inline text-green"})]}):e?(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)("button",{className:"text-blue-500",onClick:()=>{h(e),v(!0)},children:"Visualizza la Prova"}),(0,a.jsx)(k,{proof:e,id:n})]}):(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:["Prova mancante ",(0,a.jsx)(i.XfH,{className:"inline text-red"})]}),(0,a.jsx)(d,{setProof:0===n?s:1===n?r:u,setRequestUrl:f,providerID:0===n?"c444924e-4136-4282-8d2b-6600b45812c3":1===n?"f5d0ef53-97fd-4ec4-9c2f-d9e762eb1fc8":"52795369-865f-43bc-a49b-bfd10624f90a"})]});return(0,a.jsxs)("div",{className:"flex flex-1 flex-col items-center justify-center px-10 gap-y-7 py-7",children:[(0,a.jsx)(x,{requestUrl:m}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-center gap-x-12 max-sm:w-full",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-y-4 h-full py-4 max-sm:w-full max-sm:border-b-2 max-sm:border-grey",children:[(0,a.jsx)("h2",{className:"text-center font-bold",children:"Alpha Tester"}),E&&E>BigInt(0)?(0,a.jsxs)("div",{className:"text-center animate-shine-once",children:["Badge ottenuto ",(0,a.jsx)(i.L7X,{className:"inline text-green"})]}):(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:["Badge non riscattato ",(0,a.jsx)(i.XfH,{className:"inline text-red"})]}),(0,a.jsx)(O,{})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-y-4 h-full py-4 max-sm:w-full max-sm:border-b-2 max-sm:border-grey",children:[(0,a.jsx)("h2",{className:"text-center font-bold",children:"Punti Patente"}),P(e,y,0)]}),(0,a.jsxs)("div",{className:"flex flex-col gap-y-4 h-full py-4 max-sm:w-full max-sm:border-b-2 max-sm:border-grey",children:[(0,a.jsx)("h2",{className:"text-center font-bold",children:"Donazione"}),P(t,w,1)]}),(0,a.jsxs)("div",{className:"flex flex-col gap-y-4 h-full py-4 max-sm:w-full ",children:[(0,a.jsx)("h2",{className:"text-center font-bold",children:"Carbon Footprint"}),P(c,A,2)]})]}),p&&(0,a.jsx)(o,{setIsOpen:v,proof:b})]})}function E(){let e=(0,n.F)();return(0,a.jsx)(a.Fragment,{children:"connected"==e.status?(0,a.jsx)(A,{}):(0,a.jsx)("div",{className:"flex justify-center items-center h-full w-full",children:"Per favore connetti il tuo wallet"})})}function P(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.A,{backButton:!1,gameButton:!0}),(0,a.jsx)(E,{})]})}},4719:(e,s,t)=>{"use strict";t.d(s,{A:()=>o});var a=t(95155),r=t(64276),n=t(48173),l=t.n(n);function o(e){return(0,a.jsxs)("div",{className:"w-full p-4 flex justify-between",children:[(0,a.jsx)(l(),{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full self-center ".concat(e.backButton?"":"hidden"),href:"/",children:"Indietro"}),(0,a.jsx)(l(),{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full self-center ".concat(e.gameButton?"":"hidden"),href:"/game",children:"Gioco"}),(0,a.jsx)(r.pK,{})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[8451,3380,5714,8173,2214,3668,8441,1517,7358],()=>s(85765)),_N_E=e.O()}]);